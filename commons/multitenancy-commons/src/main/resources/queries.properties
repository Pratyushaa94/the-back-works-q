#
#  Copyright (c) 2025 Revinci AI.
#
#  All rights reserved. This software is proprietary to and embodies the
#  confidential technology of Revinci AI. Possession,
#  use, duplication, or dissemination of the software and media is
#  authorized only pursuant to a valid written license from Revinci AI.
#
#  Unauthorized use of this software is strictly prohibited.
#
#  THIS SOFTWARE IS PROVIDED BY Revinci AI "AS IS" AND ANY
#  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
#  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
#  DISCLAIMED. IN NO EVENT SHALL REVINCI AI BE LIABLE FOR
#  ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
#  DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
#  SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
#  CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
#  OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
#  USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
#
# @author
#
#


# ---------------------------------------------------
# Query to find a count of active non-master tenants.
# ---------------------------------------------------
findCountOfTenants=SELECT COUNT(t) FROM public.tenant t \
                    WHERE t.status = 'ACTIVE'

# -----------------------------------------------------------------------------------------------------------
# Query to find the database configurations for the tenants whose identifiers match the provided identifiers.
# -----------------------------------------------------------------------------------------------------------
findDatabaseDetailsForTenants=SELECT t.realm_name AS realm_name, trc.key AS configuration_key, trc.value_type AS value_type, trc.value AS configuration_value FROM public.tenant t \
                              INNER JOIN public.tenant_resource tr on t.id = tr.tenant_id \
                              INNER JOIN public.tenant_resource_configuration trc on tr.id = trc.tenant_resource_id \
                              WHERE tr.resource_type = 'RVC_PLATFORM_TENANT_DB' AND t.id IN (:tenantIds) \
                              ORDER BY t.id

# ------------------------------------------------------------------------------------
# Query to find active non-master tenant identifiers based on the pagination settings.
# ------------------------------------------------------------------------------------
findTenants=SELECT t.id AS id, t.realm_name AS realm_name, t.secret AS secret FROM public.tenant t \
                    WHERE t.status = 'ACTIVE' \
                    GROUP BY t.id, t.realm_name, t.secret \
                    OFFSET :offset \
                    LIMIT :limit
# ------------------------------------------------------------------------------------
# Query to find active non-master tenant identifiers based on the pagination settings.
# ------------------------------------------------------------------------------------
findTenant=SELECT t.id AS id, t.realm_name AS realm_name, t.secret AS secret FROM public.tenant t \
                     WHERE t.status = 'ACTIVE' AND t.id = :tenantId \
                    GROUP BY t.id, t.realm_name, t.secret